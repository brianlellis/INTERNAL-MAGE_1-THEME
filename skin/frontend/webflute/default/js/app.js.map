{"version":3,"sources":["app.js","custom.js"],"names":["bp","xsmall","small","medium","large","xlarge","Varien","searchForm","prototype","initialize","form","field","emptyText","$","Event","observe","submit","bind","change","focus","blur","event","value","stop","addClassName","hasClassName","removeClassName","PointerManager","MOUSE_POINTER_TYPE","TOUCH_POINTER_TYPE","POINTER_EVENT_TIMEOUT_MS","standardTouch","touchDetectionEvent","lastTouchType","pointerTimeout","pointerEventLock","getPointerEventsSupported","getPointerEventsInputTypes","window","navigator","pointerEnabled","MOUSE","TOUCH","PEN","msPointerEnabled","getPointer","Modernizr","ios","touch","setPointerEventLock","clearPointerEventLock","setPointerEventLockTimeout","that","clearTimeout","setTimeout","triggerMouseEvent","originalEvent","$j","trigger","triggerTouchEvent","initEnv","wirePointerDetection","on","e","pointerType","document","init","MenuManager","mouseEnterEventObserved","touchEventOrderIncorrect","cancelNextTouch","TouchScroll","TOUCH_SCROLL_THRESHOLD","touchStartPosition","reset","scrollTop","shouldCancelTouch","scroll","Math","abs","useSmallScreenBehavior","mq","toggleMenuVisibility","target","link","li","closest","siblings","removeClass","find","toggleClass","wirePointerEvents","pointerTarget","hoverTarget","enterEvent","leaveEvent","fullPointerSupport","undefined","mouseEnterAction","PartialPointerEventsSupport","mouseLeaveAction","data","mouseClickAction","touchAction","removeData","preventDefault","PartialTouchEventsSupport","mouseleaveLock","stopPropagation","jtarget","hasClass","parents","length","addClass","ready","w","d","body","addTest","userAgent","match","click","skipContents","skipLinks","self","attr","elem","isSkipContentOpen","parent","preventMenuSpill","windowWidth","width","each","ul","outerWidth","offset","left","css","off","innerWidth","prop","resize","show","hide","enquire","register","prepend","unmatch","mediaListLinks","mediaPrimaryImage","jQuery","fn","toggleSingle","options","settings","extend","destruct","next","wrapper","hasTabs","hasAccordion","startOpen","dl","children","dts","panes","groups","Array","dt","html","append","insertBefore","lis","push","i","filter","toggleClasses","clickedItem","group","index","eq","rightColumn","colWrapper","appendTo","main","setup","toggleElements","fadeIn","prev","alignProductGridActions","gridRows","tempRow","productGridElements","tallestProductInfo","productInfoHeight","height","actionSpacing","actionHeight","totalHeight","resizeEvent","resizeTimer","ProductMediaManager","IMAGE_ZOOM_THRESHOLD","imageWrapper","destroyZoom","remove","createZoom","image","naturalWidth","naturalHeight","widthDiff","heightDiff","elevateZoom","swapImage","targetImage","imageGallery","complete","imagesLoaded","wireThumbnails","jlink","initZoom","KPApp","console","log"],"mappings":"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","file":"app.js","sourcesContent":["/**\n * Magento Enterprise Edition\n *\n * NOTICE OF LICENSE\n *\n * This source file is subject to the Magento Enterprise Edition End User License Agreement\n * that is bundled with this package in the file LICENSE_EE.txt.\n * It is also available through the world-wide-web at this URL:\n * http://www.magento.com/license/enterprise-edition\n * If you did not receive a copy of the license and are unable to\n * obtain it through the world-wide-web, please send an email\n * to license@magento.com so we can send you a copy immediately.\n *\n * DISCLAIMER\n *\n * Do not edit or add to this file if you wish to upgrade Magento to newer\n * versions in the future. If you wish to customize Magento for your\n * needs please refer to http://www.magento.com for more information.\n *\n * @category    design\n * @package     rwd_default\n * @copyright Copyright (c) 2006-2014 X.commerce, Inc. (http://www.magento.com)\n * @license http://www.magento.com/license/enterprise-edition\n */\n\n// =============================================\n// Primary Break Points\n// =============================================\n\n// These should be used with the bp (max-width, xx) mixin\n// where a min-width is used, remember to +1 to break correctly\n// If these are changed, they must also be updated in _var.scss\n\nvar bp = {\n    xsmall: 479,\n    small: 599,\n    medium: 770,\n    large: 979,\n    xlarge: 1199\n}\n\n// ==============================================\n// Search\n// ==============================================\n\n/**\n * Implements a custom validation style for the search form. When the form is invalidly submitted, the validation-failed\n * class gets added to the input, but the \"This is a required field.\" text does not display\n */\nVarien.searchForm.prototype.initialize = function (form, field, emptyText) {\n    this.form = $(form);\n    this.field = $(field);\n    this.emptyText = emptyText;\n\n    Event.observe(this.form, 'submit', this.submit.bind(this));\n    Event.observe(this.field, 'change', this.change.bind(this));\n    Event.observe(this.field, 'focus', this.focus.bind(this));\n    Event.observe(this.field, 'blur', this.blur.bind(this));\n    this.blur();\n}\n\nVarien.searchForm.prototype.submit = function (event) {\n    if (this.field.value == this.emptyText || this.field.value == ''){\n        Event.stop(event);\n        this.field.addClassName('validation-failed');\n        this.field.focus();\n        return false;\n    }\n    return true;\n}\n\nVarien.searchForm.prototype.change = function (event) {\n    if (\n        this.field.value != this.emptyText\n        && this.field.value != ''\n        && this.field.hasClassName('validation-failed')\n    ) {\n        this.field.removeClassName('validation-failed');\n    }\n}\n\nVarien.searchForm.prototype.blur = function (event) {\n    if (this.field.hasClassName('validation-failed')) {\n        this.field.removeClassName('validation-failed');\n    }\n}\n\n// ==============================================\n// Pointer abstraction\n// ==============================================\n\n/**\n * This class provides an easy and abstracted mechanism to determine the\n * best pointer behavior to use -- that is, is the user currently interacting\n * with their device in a touch manner, or using a mouse.\n *\n * Since devices may use either touch or mouse or both, there is no way to\n * know the user's preferred pointer type until they interact with the site.\n *\n * To accommodate this, this class provides a method and two events\n * to determine the user's preferred pointer type.\n *\n * - getPointer() returns the last used pointer type, or, if the user has\n *   not yet interacted with the site, falls back to a Modernizr test.\n *\n * - The mouse-detected event is triggered on the window object when the user\n *   is using a mouse pointer input, or has switched from touch to mouse input.\n *   It can be observed in this manner: $j(window).on('mouse-detected', function(event) { // custom code });\n *\n * - The touch-detected event is triggered on the window object when the user\n *   is using touch pointer input, or has switched from mouse to touch input.\n *   It can be observed in this manner: $j(window).on('touch-detected', function(event) { // custom code });\n */\nvar PointerManager = {\n    MOUSE_POINTER_TYPE: 'mouse',\n    TOUCH_POINTER_TYPE: 'touch',\n    POINTER_EVENT_TIMEOUT_MS: 500,\n    standardTouch: false,\n    touchDetectionEvent: null,\n    lastTouchType: null,\n    pointerTimeout: null,\n    pointerEventLock: false,\n\n    getPointerEventsSupported: function() {\n        return this.standardTouch;\n    },\n\n    getPointerEventsInputTypes: function() {\n        if (window.navigator.pointerEnabled) { //IE 11+\n            //return string values from http://msdn.microsoft.com/en-us/library/windows/apps/hh466130.aspx\n            return {\n                MOUSE: 'mouse',\n                TOUCH: 'touch',\n                PEN: 'pen'\n            };\n        } else if (window.navigator.msPointerEnabled) { //IE 10\n            //return numeric values from http://msdn.microsoft.com/en-us/library/windows/apps/hh466130.aspx\n            return {\n                MOUSE:  0x00000004,\n                TOUCH:  0x00000002,\n                PEN:    0x00000003\n            };\n        } else { //other browsers don't support pointer events\n            return {}; //return empty object\n        }\n    },\n\n    /**\n     * If called before init(), get best guess of input pointer type\n     * using Modernizr test.\n     * If called after init(), get current pointer in use.\n     */\n    getPointer: function() {\n        // On iOS devices, always default to touch, as this.lastTouchType will intermittently return 'mouse' if\n        // multiple touches are triggered in rapid succession in Safari on iOS\n        if(Modernizr.ios) {\n            return this.TOUCH_POINTER_TYPE;\n        }\n\n        if(this.lastTouchType) {\n            return this.lastTouchType;\n        }\n\n        return Modernizr.touch ? this.TOUCH_POINTER_TYPE : this.MOUSE_POINTER_TYPE;\n    },\n\n    setPointerEventLock: function() {\n        this.pointerEventLock = true;\n    },\n    clearPointerEventLock: function() {\n        this.pointerEventLock = false;\n    },\n    setPointerEventLockTimeout: function() {\n        var that = this;\n\n        if(this.pointerTimeout) {\n            clearTimeout(this.pointerTimeout);\n        }\n\n        this.setPointerEventLock();\n        this.pointerTimeout = setTimeout(function() { that.clearPointerEventLock(); }, this.POINTER_EVENT_TIMEOUT_MS);\n    },\n\n    triggerMouseEvent: function(originalEvent) {\n        if(this.lastTouchType == this.MOUSE_POINTER_TYPE) {\n            return; //prevent duplicate events\n        }\n\n        this.lastTouchType = this.MOUSE_POINTER_TYPE;\n        $j(window).trigger('mouse-detected', originalEvent);\n    },\n    triggerTouchEvent: function(originalEvent) {\n        if(this.lastTouchType == this.TOUCH_POINTER_TYPE) {\n            return; //prevent duplicate events\n        }\n\n        this.lastTouchType = this.TOUCH_POINTER_TYPE;\n        $j(window).trigger('touch-detected', originalEvent);\n    },\n\n    initEnv: function() {\n        if (window.navigator.pointerEnabled) {\n            this.standardTouch = true;\n            this.touchDetectionEvent = 'pointermove';\n        } else if (window.navigator.msPointerEnabled) {\n            this.standardTouch = true;\n            this.touchDetectionEvent = 'MSPointerMove';\n        } else {\n            this.touchDetectionEvent = 'touchstart';\n        }\n    },\n\n    wirePointerDetection: function() {\n        var that = this;\n\n        if(this.standardTouch) { //standard-based touch events. Wire only one event.\n            //detect pointer event\n            $j(window).on(this.touchDetectionEvent, function(e) {\n                switch(e.originalEvent.pointerType) {\n                    case that.getPointerEventsInputTypes().MOUSE:\n                        that.triggerMouseEvent(e);\n                        break;\n                    case that.getPointerEventsInputTypes().TOUCH:\n                    case that.getPointerEventsInputTypes().PEN:\n                        // intentionally group pen and touch together\n                        that.triggerTouchEvent(e);\n                        break;\n                }\n            });\n        } else { //non-standard touch events. Wire touch and mouse competing events.\n            //detect first touch\n            $j(window).on(this.touchDetectionEvent, function(e) {\n                if(that.pointerEventLock) {\n                    return;\n                }\n\n                that.setPointerEventLockTimeout();\n                that.triggerTouchEvent(e);\n            });\n\n            //detect mouse usage\n            $j(document).on('mouseover', function(e) {\n                if(that.pointerEventLock) {\n                    return;\n                }\n\n                that.setPointerEventLockTimeout();\n                that.triggerMouseEvent(e);\n            });\n        }\n    },\n\n    init: function() {\n        this.initEnv();\n        this.wirePointerDetection();\n    }\n};\n\n/**\n * This class manages the main navigation and supports infinite nested\n * menus which support touch, mouse click, and hover correctly.\n *\n * The following is the expected behavior:\n *\n * - Hover with an actual mouse should expand the menu (at any level of nesting)\n * - Click with an actual mouse will follow the link, regardless of any children\n * - Touch will follow links without children, and toggle submenus of links with children\n *\n * Caveats:\n * - According to Mozilla's documentation (https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Touch_events),\n *   Firefox has disabled Apple-style touch events on desktop, so desktop devices using Firefox will not support\n *   the desired touch behavior.\n */\nvar MenuManager = {\n    // These variables are used to detect incorrect touch / mouse event order\n    mouseEnterEventObserved: false,\n    touchEventOrderIncorrect: false,\n    cancelNextTouch: false,\n\n    /**\n     * This class manages touch scroll detection\n     */\n    TouchScroll: {\n        /**\n         * Touch which moves the screen vertically more than\n         * this many pixels will be considered a scroll.\n         */\n        TOUCH_SCROLL_THRESHOLD: 20,\n\n        touchStartPosition: null,\n\n        /**\n         * Note scroll position so that scroll action can be detected later.\n         * Should probably be called on touchstart (or similar) event.\n         */\n        reset: function() {\n            this.touchStartPosition = $j(window).scrollTop();\n        },\n\n        /**\n         * Determines if touch was actually a scroll. Should probably be checked\n         * on touchend (or similar) event.\n         * @returns {boolean}\n         */\n        shouldCancelTouch: function() {\n            if(this.touchStartPosition == null) {\n                return false;\n            }\n\n            var scroll = $j(window).scrollTop() - this.touchStartPosition;\n            return Math.abs(scroll) > this.TOUCH_SCROLL_THRESHOLD;\n        }\n    },\n\n    /**\n     * Determines if small screen behavior should be used.\n     *\n     * @returns {boolean}\n     */\n    useSmallScreenBehavior: function() {\n        return Modernizr.mq(\"screen and (max-width:\" + bp.medium + \"px)\");\n    },\n\n    /**\n     * Toggles a given menu item's visibility.\n     * On large screens, also closes sibling and children of sibling menus.\n     *\n     * @param target\n     */\n    toggleMenuVisibility: function(target) {\n        var link = $j(target);\n        var li = link.closest('li');\n\n        if(!this.useSmallScreenBehavior()) {\n            // remove menu-active from siblings and children of siblings\n            li.siblings()\n              .removeClass('menu-active')\n              .find('li')\n              .removeClass('menu-active');\n            //remove menu-active from children\n            li.find('li.menu-active').removeClass('menu-active');\n        }\n\n        //toggle current item's active state\n        li.toggleClass('menu-active');\n    },\n\n    // --------------------------------------------\n    // Initialization methods\n    //\n\n    /**\n     * Initialize MenuManager and wire all required events.\n     * Should only be called once.\n     *\n     */\n    init: function() {\n        this.wirePointerEvents();\n    },\n\n    /**\n     * This method observes an absurd number of events\n     * depending on the capabilities of the current browser\n     * to implement expected header navigation functionality.\n     *\n     * The goal is to separate interactions into four buckets:\n     * - pointer enter using an actual mouse\n     * - pointer leave using an actual mouse\n     * - pointer down using an actual mouse\n     * - pointer down using touch\n     *\n     * Browsers supporting PointerEvent events will use these\n     * to differentiate pointer types.\n     *\n     * Browsers supporting Apple-style will use those events\n     * along with mouseenter / mouseleave to emulate pointer events.\n     */\n    wirePointerEvents: function() {\n        var that = this;\n        var pointerTarget = $j('#nav a.has-children');\n        var hoverTarget = $j('#nav li');\n\n        if(PointerManager.getPointerEventsSupported()) {\n            // pointer events supported, so observe those type of events\n\n            var enterEvent = window.navigator.pointerEnabled ? 'pointerenter' : 'mouseenter';\n            var leaveEvent = window.navigator.pointerEnabled ? 'pointerleave' : 'mouseleave';\n            var fullPointerSupport = window.navigator.pointerEnabled;\n\n            hoverTarget.on(enterEvent, function(e) {\n                if(e.originalEvent.pointerType === undefined // Browsers with partial PointerEvent support don't provide pointer type\n                    || e.originalEvent.pointerType == PointerManager.getPointerEventsInputTypes().MOUSE) {\n\n                    if(fullPointerSupport) {\n                        that.mouseEnterAction(e, this);\n                    } else {\n                        that.PartialPointerEventsSupport.mouseEnterAction(e, this);\n                    }\n                }\n            }).on(leaveEvent, function(e) {\n                if(e.originalEvent.pointerType === undefined // Browsers with partial PointerEvent support don't provide pointer type\n                    || e.originalEvent.pointerType == PointerManager.getPointerEventsInputTypes().MOUSE) {\n\n                    if(fullPointerSupport) {\n                        that.mouseLeaveAction(e, this);\n                    } else {\n                        that.PartialPointerEventsSupport.mouseLeaveAction(e, this);\n                    }\n                }\n            });\n\n            if(!fullPointerSupport) {\n                //click event doesn't have pointer type on it.\n                //observe MSPointerDown to set pointer type for click to find later\n\n                pointerTarget.on('MSPointerDown', function(e) {\n                    $j(this).data('pointer-type', e.originalEvent.pointerType);\n                });\n            }\n\n            pointerTarget.on('click', function(e) {\n                var pointerType = fullPointerSupport ? e.originalEvent.pointerType : $j(this).data('pointer-type');\n\n                if(pointerType === undefined || pointerType == PointerManager.getPointerEventsInputTypes().MOUSE) {\n                    that.mouseClickAction(e, this);\n                } else {\n                    if(fullPointerSupport) {\n                        that.touchAction(e, this);\n                    } else {\n                        that.PartialPointerEventsSupport.touchAction(e, this);\n                    }\n                }\n\n                $j(this).removeData('pointer-type'); // clear pointer type hint from target, if any\n            });\n        } else {\n            //pointer events not supported, use Apple-style events to simulate\n\n            hoverTarget.on('mouseenter', function(e) {\n                // Touch events should cancel this event if a touch pointer is used.\n                // Record that this method has fired so that erroneous following\n                // touch events (if any) can respond accordingly.\n                that.mouseEnterEventObserved = true;\n                that.cancelNextTouch = true;\n\n                that.mouseEnterAction(e, this);\n            }).on('mouseleave', function(e) {\n                that.mouseLeaveAction(e, this);\n            });\n\n            $j(window).on('touchstart', function(e) {\n                if(that.mouseEnterEventObserved) {\n                    // If mouse enter observed before touch, then device touch\n                    // event order is incorrect.\n                    that.touchEventOrderIncorrect = true;\n                    that.mouseEnterEventObserved = false; // Reset test\n                }\n\n                // Reset TouchScroll in order to detect scroll later.\n                that.TouchScroll.reset();\n            });\n\n            pointerTarget.on('touchend', function(e) {\n                $j(this).data('was-touch', true); // Note that element was invoked by touch pointer\n\n                e.preventDefault(); // Prevent mouse compatibility events from firing where possible\n\n                if(that.TouchScroll.shouldCancelTouch()) {\n                    return; // Touch was a scroll -- don't do anything else\n                }\n\n                if(that.touchEventOrderIncorrect) {\n                    that.PartialTouchEventsSupport.touchAction(e, this);\n                } else {\n                    that.touchAction(e, this);\n                }\n            }).on('click', function(e) {\n                if($j(this).data('was-touch')) { // Event invoked after touch\n                    e.preventDefault(); // Prevent following link\n                    return; // Prevent other behavior\n                }\n\n                that.mouseClickAction(e, this);\n            });\n        }\n    },\n\n     // --------------------------------------------\n     // Behavior \"buckets\"\n     //\n\n    /**\n     * Browsers with incomplete PointerEvent support (such as IE 10)\n     * require special event management. This collection of methods\n     * accommodate such browsers.\n     */\n    PartialPointerEventsSupport: {\n        /**\n         * Without proper pointerenter / pointerleave / click pointerType support,\n         * we have to use mouseenter events. These end up triggering\n         * lots of mouseleave events that can be misleading.\n         *\n         * Each touch mouseenter and click event that ends up triggering\n         * an undesired mouseleave increments this lock variable.\n         *\n         * Mouseleave events are cancelled if this variable is > 0,\n         * and then the variable is decremented regardless.\n         */\n        mouseleaveLock: 0,\n\n        /**\n         * Handles mouse enter behavior, but if using touch,\n         * toggle menus in the absence of full PointerEvent support.\n         *\n         * @param event\n         * @param target\n         */\n        mouseEnterAction: function(event, target) {\n            if(MenuManager.useSmallScreenBehavior()) {\n                // fall back to normal method behavior\n                MenuManager.mouseEnterAction(event, target);\n                return;\n            }\n\n            event.stopPropagation();\n\n            var jtarget = $j(target);\n            if(!jtarget.hasClass('level0')) {\n                this.mouseleaveLock = jtarget.parents('li').length + 1;\n            }\n\n            MenuManager.toggleMenuVisibility(target);\n        },\n\n        /**\n         * Handles mouse leave behaivor, but obeys the mouseleaveLock\n         * to allow undesired mouseleave events to be cancelled.\n         *\n         * @param event\n         * @param target\n         */\n        mouseLeaveAction: function(event, target) {\n            if(MenuManager.useSmallScreenBehavior()) {\n                // fall back to normal method behavior\n                MenuManager.mouseLeaveAction(event, target);\n                return;\n            }\n\n            if(this.mouseleaveLock > 0) {\n                this.mouseleaveLock--;\n                return; // suppress duplicate mouseleave event after touch\n            }\n\n            $j(target).removeClass('menu-active'); //hide all menus\n        },\n\n        /**\n         * Does no work on its own, but increments mouseleaveLock\n         * to prevent following undesireable mouseleave events.\n         *\n         * @param event\n         * @param target\n         */\n        touchAction: function(event, target) {\n            if(MenuManager.useSmallScreenBehavior()) {\n                // fall back to normal method behavior\n                MenuManager.touchAction(event, target);\n                return;\n            }\n            event.preventDefault(); // prevent following link\n            this.mouseleaveLock++;\n        }\n    },\n\n    /**\n     * Browsers with incomplete Apple-style touch event support\n     * (such as the legacy Android browser) sometimes fire\n     * touch events out of order. In particular, mouseenter may\n     * fire before the touch events. This collection of methods\n     * accommodate such browsers.\n     */\n    PartialTouchEventsSupport: {\n        /**\n         * Toggles visibility of menu, unless suppressed by previous\n         * out of order mouseenter event.\n         *\n         * @param event\n         * @param target\n         */\n        touchAction: function(event, target) {\n            if(MenuManager.cancelNextTouch) {\n                // Mouseenter has already manipulated the menu.\n                // Suppress this undesired touch event.\n                MenuManager.cancelNextTouch = false;\n                return;\n            }\n\n            MenuManager.toggleMenuVisibility(target);\n        }\n    },\n\n    /**\n     * On large screens, show menu.\n     * On small screens, do nothing.\n     *\n     * @param event\n     * @param target\n     */\n    mouseEnterAction: function(event, target) {\n        if(this.useSmallScreenBehavior()) {\n            return; // don't do mouse enter functionality on smaller screens\n        }\n\n        $j(target).addClass('menu-active'); //show current menu\n    },\n\n    /**\n     * On large screens, hide menu.\n     * On small screens, do nothing.\n     *\n     * @param event\n     * @param target\n     */\n    mouseLeaveAction: function(event, target) {\n        if(this.useSmallScreenBehavior()) {\n            return; // don't do mouse leave functionality on smaller screens\n        }\n\n        $j(target).removeClass('menu-active'); //hide all menus\n    },\n\n    /**\n     * On large screens, don't interfere so that browser will follow link.\n     * On small screens, toggle menu visibility.\n     *\n     * @param event\n     * @param target\n     */\n    mouseClickAction: function(event, target) {\n        if(this.useSmallScreenBehavior()) {\n            event.preventDefault(); //don't follow link\n            this.toggleMenuVisibility(target); //instead, toggle visibility\n        }\n    },\n\n    /**\n     * Toggle menu visibility, and prevent event default to avoid\n     * undesired, duplicate, synthetic mouse events.\n     *\n     * @param event\n     * @param target\n     */\n    touchAction: function(event, target) {\n        this.toggleMenuVisibility(target);\n\n        event.preventDefault();\n    }\n};\n\n// ==============================================\n// jQuery Init\n// ==============================================\n\n// Use $j(document).ready() because Magento executes Prototype inline\n$j(document).ready(function () {\n\n    // ==============================================\n    // Shared Vars\n    // ==============================================\n\n    // Document\n    var w = $j(window);\n    var d = $j(document);\n    var body = $j('body');\n\n    Modernizr.addTest('ios', function () {\n        return navigator.userAgent.match(/(iPad|iPhone|iPod)/g);\n    });\n\n    //initialize pointer abstraction manager\n    PointerManager.init();\n\n    /* Wishlist Toggle Class */\n\n    $j(\".change\").click(function (e) {\n        $j( this ).toggleClass('active');\n        e.stopPropagation()\n    });\n\n    $j(document).click(function (e) {\n        if (! $j(e.target).hasClass('.change')) $j(\".change\").removeClass('active');\n    });\n\n\n    // =============================================\n    // Skip Links\n    // =============================================\n\n    var skipContents = $j('.skip-content');\n    var skipLinks = $j('.skip-link');\n\n    $j('#header').on('click', '.skip-link', function (e) {\n        e.preventDefault();\n\n        var self = $j(this);\n        // Use the data-target-element attribute, if it exists. Fall back to href.\n        var target = self.attr('data-target-element') ? self.attr('data-target-element') : self.attr('href');\n\n        // Get target element\n        var elem = $j(target);\n\n        // Check if stub is open\n        var isSkipContentOpen = elem.hasClass('skip-active') ? 1 : 0;\n\n        // Hide all stubs\n        skipLinks.removeClass('skip-active');\n        skipContents.removeClass('skip-active');\n\n        // Toggle stubs\n        if (isSkipContentOpen) {\n            self.removeClass('skip-active');\n        } else {\n            self.addClass('skip-active');\n            elem.addClass('skip-active');\n        }\n    });\n\n    $j('#header').on('click', '.skip-link-close', function(e) {\n        var parent = $j(this).parents('.skip-content');\n        var link = parent.siblings('.skip-link');\n\n        parent.removeClass('skip-active');\n        link.removeClass('skip-active');\n\n        e.preventDefault();\n    });\n\n\n    // ==============================================\n    // Header Menus\n    // ==============================================\n\n    // initialize menu\n    MenuManager.init();\n\n    // Prevent sub menus from spilling out of the window.\n    function preventMenuSpill() {\n        var windowWidth = $j(window).width();\n        $j('ul.level0').each(function(){\n            var ul = $j(this);\n            //Show it long enough to get info, then hide it.\n            ul.addClass('position-test');\n            ul.removeClass('spill');\n            var width = ul.outerWidth();\n            var offset = ul.offset().left;\n            ul.removeClass('position-test');\n            //Add the spill class if it will spill off the page.\n            if ((offset + width) > windowWidth) {\n                ul.addClass('spill');\n            }\n        });\n    }\n    preventMenuSpill();\n    $j(window).on('delayed-resize', preventMenuSpill);\n\n\n    // ==============================================\n    // Mobile Menus\n    // ==============================================\n    $j(document).ready(function() {\n        $j('#off-canvas-left').css('height', $j('#inner-wrap').css('height'));\n    });\n\n    $j('#header .page-header-container > .skip-links').off().on('click', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if(window.innerWidth <= 960) {\n            $j('#off-canvas-left-check').prop('checked', true);\n        } \n    });\n\n    $j('#mobileMenuClose').on('click', function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        $j('#off-canvas-left-check').prop('checked', false);\n    });\n\n    $j(document).resize(function(event) {\n        if(window.innerWidth > 960) {\n            $j('#off-canvas-left-check').prop('checked', false);\n            $j('.footer-submenu').show();\n            $j('.footer > .links').removeClass('opened');\n\n        }\n    });\n\n    /* FOOTER */\n    $j('.footer > .links').click(function() { \n        if(window.innerWidth <= 960) {\n            if (! $j(this).hasClass('opened')) {\n                $j(this).addClass('opened');\n                $j(this).find('.footer-submenu').show('fast');\n            } else {\n                $j(this).removeClass('opened');\n                $j(this).find('.footer-submenu').hide();\n            }\n        }\n    });\n\n    // ==============================================\n    // Language Switcher\n    // ==============================================\n\n    // In order to display the language switcher next to the logo, we are moving the content at different viewports,\n    // rather than having duplicate markup or changing the design\n    enquire.register('(max-width: ' + bp.medium + 'px)', {\n        match: function () {\n            $j('.page-header-container .store-language-container').prepend($j('.form-language'));\n        },\n        unmatch: function () {\n            $j('.header-language-container .store-language-container').prepend($j('.form-language'));\n        }\n    });\n\n    // ==============================================\n    // Enquire JS\n    // ==============================================\n\n    enquire.register('screen and (min-width: ' + (bp.medium + 1) + 'px)', {\n        match: function () {\n            $j('.menu-active').removeClass('menu-active');\n            $j('.sub-menu-active').removeClass('sub-menu-active');\n            $j('.skip-active').removeClass('skip-active');\n        },\n        unmatch: function () {\n            $j('.menu-active').removeClass('menu-active');\n            $j('.sub-menu-active').removeClass('sub-menu-active');\n            $j('.skip-active').removeClass('skip-active');\n        }\n    });\n\n    // ==============================================\n    // UI Pattern - Media Switcher\n    // ==============================================\n\n    // Used to swap primary product photo from thumbnails.\n\n    var mediaListLinks = $j('.media-list').find('a');\n    var mediaPrimaryImage = $j('.primary-image').find('img');\n\n    if (mediaListLinks.length) {\n        mediaListLinks.on('click', function (e) {\n            e.preventDefault();\n\n            var self = $j(this);\n\n            mediaPrimaryImage.attr('src', self.attr('href'));\n        });\n    }\n\n    // ==============================================\n    // UI Pattern - ToggleSingle\n    // ==============================================\n\n    // Use this plugin to toggle the visibility of content based on a toggle link/element.\n    // This pattern differs from the accordion functionality in the Toggle pattern in that each toggle group acts\n    // independently of the others. It is named so as not to be confused with the Toggle pattern below\n    //\n    // This plugin requires a specific markup structure. The plugin expects a set of elements that it\n    // will use as the toggle link. It then hides all immediately following siblings and toggles the sibling's\n    // visibility when the toggle link is clicked.\n    //\n    // Example markup:\n    // <div class=\"block\">\n    //     <div class=\"block-title\">Trigger</div>\n    //     <div class=\"block-content\">Content that should show when </div>\n    // </div>\n    //\n    // JS: jQuery('.block-title').toggleSingle();\n    //\n    // Options:\n    //     destruct: defaults to false, but if true, the plugin will remove itself, display content, and remove event handlers\n\n\n    jQuery.fn.toggleSingle = function (options) {\n\n        // passing destruct: true allows\n        var settings = $j.extend({\n            destruct: false\n        }, options);\n\n        return this.each(function () {\n            if (!settings.destruct) {\n                $j(this).on('click', function () {\n                    $j(this)\n                        .toggleClass('active')\n                        .next()\n                        .toggleClass('no-display');\n                });\n                // Hide the content\n                $j(this).next().addClass('no-display');\n            } else {\n                // Remove event handler so that the toggle link can no longer be used\n                $j(this).off('click');\n                // Remove all classes that were added by this plugin\n                $j(this)\n                    .removeClass('active')\n                    .next()\n                    .removeClass('no-display');\n            }\n\n        });\n    }\n\n    // ==============================================\n    // UI Pattern - Toggle Content (tabs and accordions in one setup)\n    // ==============================================\n    \n    $j('.toggle-content').each(function () {\n        var wrapper = jQuery(this);\n\n        var hasTabs = wrapper.hasClass('tabs');\n        var hasAccordion = wrapper.hasClass('accordion');\n        var startOpen = wrapper.hasClass('open');\n\n        var dl = wrapper.children('dl:first');\n        var dts = dl.children('dt');\n        var panes = dl.children('dd');\n        var groups = new Array(dts, panes);\n\n        //Create a ul for tabs if necessary.\n        if (hasTabs) {\n            var ul = jQuery('<ul class=\"toggle-tabs\"></ul>');\n            dts.each(function () {\n                var dt = jQuery(this);\n                var li = jQuery('<li></li>');\n                li.html(dt.html());\n                ul.append(li);\n            });\n            ul.insertBefore(dl);\n            var lis = ul.children();\n            groups.push(lis);\n        }\n\n        //Add \"last\" classes.\n        var i;\n        for (i = 0; i < groups.length; i++) {\n            groups[i].filter(':last').addClass('last');\n        }\n\n        function toggleClasses(clickedItem, group) {\n            var index = group.index(clickedItem);\n            var i;\n            for (i = 0; i < groups.length; i++) {\n                groups[i].removeClass('current');\n                groups[i].eq(index).addClass('current');\n            }\n        }\n\n        //Toggle on tab (dt) click.\n        dts.on('click', function (e) {\n            //They clicked the current dt to close it. Restore the wrapper to unclicked state.\n            if (jQuery(this).hasClass('current') && wrapper.hasClass('accordion-open')) {\n                wrapper.removeClass('accordion-open');\n            } else {\n                //They're clicking something new. Reflect the explicit user interaction.\n                wrapper.addClass('accordion-open');\n            }\n            toggleClasses(jQuery(this), dts);\n        });\n\n        //Toggle on tab (li) click.\n        if (hasTabs) {\n            lis.on('click', function (e) {\n                toggleClasses(jQuery(this), lis);\n            });\n            //Open the first tab.\n            lis.eq(0).trigger('click');\n        }\n\n        //Open the first accordion if desired.\n        if (startOpen) {\n            dts.eq(0).trigger('click');\n        }\n\n    });\n\n\n    // ==============================================\n    // Layered Navigation Block\n    // ==============================================\n\n    // On product list pages, we want to show the layered nav/category menu immediately above the product list.\n    // While it would make more sense to just move the .block-layered-nav block rather than .col-left-first\n    // (since other blocks can be inserted into left_first), it creates simpler code to move the entire\n    // .col-left-first block, so that is the approach we're taking\n    if ($j('.col-left-first > .block').length && $j('.category-products').length) {\n        enquire.register('screen and (max-width: ' + bp.medium + 'px)', {\n            match: function () {\n                $j('.col-left-first').insertBefore($j('.category-products'))\n            },\n            unmatch: function () {\n                // Move layered nav back to left column\n                $j('.col-left-first').insertBefore($j('.col-main'))\n            }\n        });\n    }\n\n    // ==============================================\n    // 3 column layout\n    // ==============================================\n\n    // On viewports smaller than 1000px, move the right column into the left column\n    if ($j('.main-container.col3-layout').length > 0) {\n        enquire.register('screen and (max-width: 1000px)', {\n            match: function () {\n                var rightColumn = $j('.col-right');\n                var colWrapper = $j('.col-wrapper');\n\n                rightColumn.appendTo(colWrapper);\n            },\n            unmatch: function () {\n                var rightColumn = $j('.col-right');\n                var main = $j('.main');\n\n                rightColumn.appendTo(main);\n            }\n        });\n    }\n\n\n    // ==============================================\n    // Block collapsing (on smaller viewports)\n    // ==============================================\n\n    enquire.register('(max-width: ' + bp.medium + 'px)', {\n        setup: function () {\n            this.toggleElements = $j(\n                // This selects the menu on the My Account and CMS pages\n                '.col-left-first .block:not(.block-layered-nav) .block-title, ' +\n                    '.col-left-first .block-layered-nav .block-subtitle--filter, ' +\n                    '.sidebar:not(.col-left-first) .block .block-title'\n            );\n        },\n        match: function () {\n            if(this.toggleElements.length > 0){\n                this.toggleElements.toggleSingle();\n            }\n        },\n        unmatch: function () {\n            if(this.toggleElements.length > 0){\n                this.toggleElements.toggleSingle({destruct: true});\n            }\n        }\n    });\n\n\n    // ==============================================\n    // OPC - Progress Block\n    // ==============================================\n\n    if ($j('body.checkout-onepage-index').length) {\n        enquire.register('(max-width: ' + bp.large + 'px)', {\n            match: function () {\n                $j('#checkout-step-review').prepend($j('#checkout-progress-wrapper'));\n            },\n            unmatch: function () {\n                $j('.col-right').prepend($j('#checkout-progress-wrapper'));\n            }\n        });\n    }\n\n\n    // ==============================================\n    // Checkout Cart - events\n    // ==============================================\n\n    if ($j('body.checkout-cart-index').length) {\n        $j('input[name^=\"cart\"]').focus(function () {\n            $j(this).siblings('button').fadeIn();\n        });\n    }\n\n\n    // ==============================================\n    // Gift Registry Styles\n    // ==============================================\n\n    if ($j('.a-left').length) {\n        enquire.register('(max-width: ' + bp.large + 'px)', {\n            match: function () {\n                $j('.gift-info').each(function() {\n                  $j(this).next('td').children('textarea').appendTo(this).children();\n                })\n            },\n            unmatch: function () {\n                $j('.left-note').each(function() {\n                    $j(this).prev('td').children('textarea').appendTo(this).children();\n                })\n            }\n        });\n    }\n\n\n    // ==============================================\n    // Product Listing - Align action buttons/links\n    // ==============================================\n\n    // Since the number of columns per grid will vary based on the viewport size, the only way to align the action\n    // buttons/links is via JS\n\n    if ($j('.products-grid').length) {\n\n        var alignProductGridActions = function () {\n            // Loop through each product grid on the page\n            $j('.products-grid').each(function(){\n                var gridRows = []; // This will store an array per row\n                var tempRow = [];\n                productGridElements = $j(this).children('li');\n                productGridElements.each(function (index) {\n                    // The JS ought to be agnostic of the specific CSS breakpoints, so we are dynamically checking to find\n                    // each row by grouping all cells (eg, li elements) up until we find an element that is cleared.\n                    // We are ignoring the first cell since it will always be cleared.\n                    if ($j(this).css('clear') != 'none' && index != 0) {\n                        gridRows.push(tempRow); // Add the previous set of rows to the main array\n                        tempRow = []; // Reset the array since we're on a new row\n                    }\n                    tempRow.push(this);\n\n                    // The last row will not contain any cells that clear that row, so we check to see if this is the last cell\n                    // in the grid, and if so, we add its row to the array\n                    if (productGridElements.length == index + 1) {\n                        gridRows.push(tempRow);\n                    }\n                });\n\n                $j.each(gridRows, function () {\n                    var tallestProductInfo = 0;\n                    $j.each(this, function () {\n                        // Since this function is called every time the page is resized, we need to remove the min-height\n                        // and bottom-padding so each cell can return to its natural size before being measured.\n                        $j(this).find('.product-info').css({\n                            'min-height': '',\n                            'padding-bottom': ''\n                        });\n\n                        // We are checking the height of .product-info (rather than the entire li), because the images\n                        // will not be loaded when this JS is run.\n                        var productInfoHeight = $j(this).find('.product-info').height();\n                        // Space above .actions element\n                        var actionSpacing = 10;\n                        // The height of the absolutely positioned .actions element\n                        var actionHeight = $j(this).find('.product-info .actions').height();\n\n                        // Add height of two elements. This is necessary since .actions is absolutely positioned and won't\n                        // be included in the height of .product-info\n                        var totalHeight = productInfoHeight + actionSpacing + actionHeight;\n                        if (totalHeight > tallestProductInfo) {\n                            tallestProductInfo = totalHeight;\n                        }\n\n                        // Set the bottom-padding to accommodate the height of the .actions element. Note: if .actions\n                        // elements are of varying heights, they will not be aligned.\n                        $j(this).find('.product-info').css('padding-bottom', actionHeight + 'px');\n                    });\n                    // Set the height of all .product-info elements in a row to the tallest height\n                    $j.each(this, function () {\n                        $j(this).find('.product-info').css('min-height', tallestProductInfo);\n                    });\n                });\n            });\n        }\n        alignProductGridActions();\n\n        // Since the height of each cell and the number of columns per page may change when the page is resized, we are\n        // going to run the alignment function each time the page is resized.\n        $j(window).on('delayed-resize', function (e, resizeEvent) {\n            alignProductGridActions();\n        });\n    }\n\n    // ==============================================\n    // Generic, efficient window resize handler\n    // ==============================================\n\n    // Using setTimeout since Web-Kit and some other browsers call the resize function constantly upon window resizing.\n    var resizeTimer;\n    $j(window).resize(function (e) {\n        clearTimeout(resizeTimer);\n        resizeTimer = setTimeout(function () {\n            $j(window).trigger('delayed-resize', e);\n        }, 250);\n    });\n});\n\n// ==============================================\n// PDP - image zoom - needs to be available outside document.ready scope\n// ==============================================\n\nvar ProductMediaManager = {\n    IMAGE_ZOOM_THRESHOLD: 20,\n    imageWrapper: null,\n\n    destroyZoom: function() {\n        $j('.zoomContainer').remove();\n        $j('.product-image-gallery .gallery-image').removeData('elevateZoom');\n    },\n\n    createZoom: function(image) {\n        // Destroy since zoom shouldn't be enabled under certain conditions\n        ProductMediaManager.destroyZoom();\n\n        if(\n            // Don't use zoom on devices where touch has been used\n            PointerManager.getPointer() == PointerManager.TOUCH_POINTER_TYPE\n            // Don't use zoom when screen is small, or else zoom window shows outside body\n            || Modernizr.mq(\"screen and (max-width:\" + bp.medium + \"px)\")\n        ) {\n            return; // zoom not enabled\n        }\n\n        if(image.length <= 0) { //no image found\n            return;\n        }\n\n        if(image[0].naturalWidth && image[0].naturalHeight) {\n            var widthDiff = image[0].naturalWidth - image.width() - ProductMediaManager.IMAGE_ZOOM_THRESHOLD;\n            var heightDiff = image[0].naturalHeight - image.height() - ProductMediaManager.IMAGE_ZOOM_THRESHOLD;\n\n            if(widthDiff < 0 && heightDiff < 0) {\n                //image not big enough\n\n                image.parents('.product-image').removeClass('zoom-available');\n\n                return;\n            } else {\n                image.parents('.product-image').addClass('zoom-available');\n            }\n        }\n\n        image.elevateZoom();\n    },\n\n    swapImage: function(targetImage) {\n        targetImage = $j(targetImage);\n        targetImage.addClass('gallery-image');\n\n        ProductMediaManager.destroyZoom();\n\n        var imageGallery = $j('.product-image-gallery');\n\n        if(targetImage[0].complete) { //image already loaded -- swap immediately\n\n            imageGallery.find('.gallery-image').removeClass('visible');\n\n            //move target image to correct place, in case it's necessary\n            imageGallery.append(targetImage);\n\n            //reveal new image\n            targetImage.addClass('visible');\n\n            //wire zoom on new image\n            ProductMediaManager.createZoom(targetImage);\n\n        } else { //need to wait for image to load\n\n            //add spinner\n            imageGallery.addClass('loading');\n\n            //move target image to correct place, in case it's necessary\n            imageGallery.append(targetImage);\n\n            //wait until image is loaded\n            imagesLoaded(targetImage, function() {\n                //remove spinner\n                imageGallery.removeClass('loading');\n\n                //hide old image\n                imageGallery.find('.gallery-image').removeClass('visible');\n\n                //reveal new image\n                targetImage.addClass('visible');\n\n                //wire zoom on new image\n                ProductMediaManager.createZoom(targetImage);\n            });\n\n        }\n    },\n\n    wireThumbnails: function() {\n        //trigger image change event on thumbnail click\n        $j('.product-image-thumbs .thumb-link').click(function(e) {\n            e.preventDefault();\n            var jlink = $j(this);\n            var target = $j('#image-' + jlink.data('image-index'));\n            ProductMediaManager.swapImage(target);\n\n            //var target = $j('.image-' + jlink.data('image-index'));\n            //$j(\".product-desktop-images a\").hide();\n            //target.show();\n        });\n    },\n\n    initZoom: function() {\n        ProductMediaManager.createZoom($j(\".gallery-image.visible\")); //set zoom on first image\n    },\n\n    init: function() {\n        ProductMediaManager.imageWrapper = $j('.product-img-box');\n\n        // Re-initialize zoom on viewport size change since resizing causes problems with zoom and since smaller\n        // viewport sizes shouldn't have zoom\n        $j(window).on('delayed-resize', function(e, resizeEvent) {\n            ProductMediaManager.initZoom();\n        });\n\n        ProductMediaManager.initZoom();\n\n        ProductMediaManager.wireThumbnails();\n\n        $j(document).trigger('product-media-loaded', ProductMediaManager);\n    }\n};\n\n$j(document).ready(function() {\n    ProductMediaManager.init();\n});\n","(function ($) {\n    $(document).ready(() => {\n\n        let KPApp = {\n            init: () => {\n                console.log('init');\n            }\n        };\n\n        window.KPApp = KPApp;\n        KPApp.init();\n    });\n\n})(jQuery);"]}